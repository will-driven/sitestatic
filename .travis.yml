language: python
python:
    - "2.7"

install: 
  - pip install awscli
  - npm install jekyll
script:
  - jekyll run build
  # - aws s3 sync --acl public-read  assets  s3://org-staticsiteassets --cache-control max-age=604800
  #- aws s3 sync --acl public-read --sse --delete _site/assets  s3://org-staticsiteassets --cache-control max-age=604800
  #- aws configure set preview.cloudfront true
  #- aws cloudfront create-invalidation --distribution-id $CLOUDFRONT_DISTRIBUTION_ID --paths '/*'
after_success:
  - aws s3 sync --acl public-read --sse --delete _site/assets  s3://org-staticsiteassets --cache-control max-age=604800
branches:
  only: 
    - master